---
page_title: "warpgate_target_role Resource - terraform-provider-warpgate"
subcategory: ""
description: |-
  Creates an association between a target and a role in WarpGate.
---

# warpgate_target_role (Resource)

Creates an association between a target and a role in WarpGate. This relationship makes the target accessible to users who have the same role assigned.

## Example Usage

```hcl
resource "warpgate_target" "web_server" {
  name = "web-server"
  
  ssh_options {
    host     = "10.0.0.1"
    port     = 22
    username = "admin"
    public_key_auth {}
  }
}

resource "warpgate_role" "developers" {
  name = "developers"
}

resource "warpgate_target_role" "developers_web_access" {
  target_id = warpgate_target.web_server.id
  role_id   = warpgate_role.developers.id
}
```

## Complete Access Control Example

This example demonstrates a complete access control setup with users, roles, targets, and their relationships:

```hcl
# Create roles
resource "warpgate_role" "developers" {
  name        = "developers"
  description = "Development team members"
}

resource "warpgate_role" "administrators" {
  name        = "administrators"
  description = "System administrators"
}

# Create users
resource "warpgate_user" "eugene" {
  username    = "eugene"
  description = "Developer"
  
  credential_policy {
    ssh = ["Password", "PublicKey"]
  }
}

resource "warpgate_user" "jane" {
  username    = "jane.smith"
  description = "Administrator"
  
  credential_policy {
    ssh = ["Password", "PublicKey"]
  }
}

# Create targets
resource "warpgate_target" "web_server" {
  name        = "web-server"
  description = "Web server"
  
  ssh_options {
    host     = "10.0.0.1"
    port     = 22
    username = "webadmin"
    public_key_auth {}
  }
}

resource "warpgate_target" "db_server" {
  name        = "db-server"
  description = "Database server"
  
  ssh_options {
    host     = "10.0.0.2"
    port     = 22
    username = "dbadmin"
    public_key_auth {}
  }
}

# Assign roles to users
resource "warpgate_user_role" "eugene_developer" {
  user_id = warpgate_user.eugene.id
  role_id = warpgate_role.developers.id
}

resource "warpgate_user_role" "jane_administrator" {
  user_id = warpgate_user.jane.id
  role_id = warpgate_role.administrators.id
}

# Assign roles to targets
resource "warpgate_target_role" "developers_web_access" {
  target_id = warpgate_target.web_server.id
  role_id   = warpgate_role.developers.id
}

resource "warpgate_target_role" "admins_web_access" {
  target_id = warpgate_target.web_server.id
  role_id   = warpgate_role.administrators.id
}

resource "warpgate_target_role" "admins_db_access" {
  target_id = warpgate_target.db_server.id
  role_id   = warpgate_role.administrators.id
}
```

This setup results in the following access matrix:
- Eugene (developer) can access the web server
- Jane (administrator) can access both the web server and the database server

## Argument Reference

The following arguments are supported:

* `target_id` - (Required) The ID of the target to assign the role to.
* `role_id` - (Required) The ID of the role to assign.

## Attribute Reference

In addition to all arguments above, the following attributes are exported:

* `id` - The combined ID in the format `target_id:role_id`.

## Import

Target-role associations can be imported using a combined ID with the format `target_id:role_id`:

```
$ terraform import warpgate_target_role.developers_web_access 12345678-1234-1234-1234-123456789012:87654321-4321-4321-4321-210987654321
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `role_id` (String) The ID of the role to assign
- `target_id` (String) The ID of the target to assign the role to

### Read-Only

- `id` (String) The ID of this resource.
